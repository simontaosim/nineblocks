基于koa+nextjs+koa+postgresql


## 格九产品特性

基础特性

1. 格子交易，拍卖

2. 格子拥有二维坐标，标题，富文本介绍和类型

3. 多语言

4. 在格子间移动需要旅费

5. 进入格子需要买门票

6. 格子是轻博客

7. 格子收藏

8. 格子是聊天室，广播和私聊

9. 格子内好友

10. 格子外好友需要飞鸽，飞鸽需要旅费

11. 游客浏览，注册于游客所在位置

12. 格子可以开发无主的格子，无主格子的价格具有随机性

13. 格子内部有权限，分权限的人需要给出门票收入，至少一个格币

14. 上线apk

15. 热更新

16. 上线苹果应用商店

17. 上线google play

18. 申请著作权

19. 开发国内版本

20. 国内版本内容审核

    

### 梳理所有sql语句

    1. 初始化数据

    2. 查询或者生成格子

    3. 注册，初始化用户数据

    4. 登录

    5. 验证登录
    6. 旅行费用计算
    7. 拉去格子简介
    8. 进入格子，扣除门票
    9. 获取最新格子帖子
    10. 获取格子中用户列表
    11. 向格子中的用户发出消息
    12. 评论帖子
    13. 回复评论帖子
    14. 加好友请求
    15. 同意加好友
    16. 向好友发私信
    17. 格子主人发帖子
    18. 购买无人的格子



## Postgresql 相关操作

### 创建linux/unix 用户

sudo adduser dbuser



### 切换到postgres

sudo su - postgres



### 为dbuser设置密码

CREATE USER dbuser WITH PASSWORD 'nineblocks2020best';



### 创建数据库nineblocks 指定管理员dbuser

CREATE DATABASE nineblocks OWNER dbuser;



## 开发和启动

yarn dev 开发服务器启动

yarn start 启动

